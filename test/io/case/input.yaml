---
build:
  - !case
    - condition: !all
        - !locale { user: user_a }
        - !locale { user: user_b }
      include:
      - !install
        - name: not_package
    # Default case
    - condition: !default
      include:
      # Nested conditional
      - !case
        - condition: !all
            - !locale { user: user_a }
            - !locale { user: user_b }
          include:
            - !require
              - name: choco
        # Negative case
        - condition: !bool false
          when: false
          include:
            - !install
              - name: package_0
      - !install
        - name: package_1
          managers: [ apt, apt-get ]
          aliases: { apt: package_1-alias }
  - !case
    - condition: !eval bad-command
      when: false
      include:
        - !install
          - name: package_2
    # Break on first match
    - condition: !bool true
      include:
        - !install
          - name: not_package
