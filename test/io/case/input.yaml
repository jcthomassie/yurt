---
version: '>=0.5.0'
build:
  - !case
    - !positive
        condition: !all
          - !locale { user: user_a }
          - !locale { user: user_b }
        include:
        - !install
          - name: not_package
    - !default
        include:
        # Nested conditional
        - !case
          - !positive
              condition: !all
                - !locale { user: user_a }
                - !locale { user: user_b }
              include:
                - !require
                  - choco
          - !negative
              condition: !bool false
              include:
                - !install
                  - name: package_0
        - !install
          - name: package_1
            managers: [ apt, apt-get ]
            aliases: { apt: package_1-alias }
  - !case
    - !negative
        condition: !eval bad-command
        include:
          - !install
            - name: package_2
    # Break on first match
    - !positive
        condition: !bool true
        include:
          - !install
            - name: not_package
