---
version: 0.2.0
shell: zsh
build:
  - repo:
      path: ~/dotfiles
      url: https://github.com/user/dotfiles.git
  # Conditional instructions
  - case:
    - positive:
        spec:
          user: not_user
        include:
        - install:
          - name: not_package
    - default:
        include:
        # Nested conditional
        - case:
          - positive:
              spec:
                user: not_user
              include:
                - require:
                  - choco
          - negative:
              spec:
                user: not_user
              include:
                - install:
                  - name: package_0
        - install:
          - name: package_1
            managers: [ apt, apt-get ]
            aliases: { apt: package_1-alias }
  # Top level instructions
  - require: [ cargo, brew ]
  - matrix:
      values:
        number: [ 1, 2, 3 ]
        letter: [ a, b, c ]
      include:
      - link:
        - tail: dir_${{ matrix.letter }}/tail_${{ matrix.number }}
          head: dir_${{ matrix.letter }}/head_${{ matrix.number }}
  - namespace:
      name: names
      values:
        alpha: package_2
        beta: package_3
        gamma: package_4
  - install:
    - name: ${{ names.alpha }}
    - name: ${{ names.beta }}
    - name: ${{ names.gamma }}
  - run: |
      echo "hello world"
      echo "repo root ${{ dotfiles.path }}"
